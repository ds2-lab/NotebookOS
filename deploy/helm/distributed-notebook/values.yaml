replicaCount: 1

namespace: default

serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

podAnnotations: {}

podSecurityContext: {}

securityContext: {}

workload_driver:
  image: scusemua/workload-driver
  image_tag: latest

service:
  type: ClusterIP
  port: 80

hdfs:
  namenode_endpoint: "172.17.0.1:9000"

gateway:
  grpc_port: 8080
  provisioner_port: 8081
  image: scusemua/gateway
  image_tag: latest
  distributed_cluster_service_port: 8079

scheduler_extender:
  image: scusemua/scheduler_extender
  image_tag: latest

notebook_server:
  port: 8888
  image: scusemua/jupyter
  image_tag: latest

local_daemon:
  image: scusemua/daemon
  image_tag: latest
  max_actual_gpu_per_node: 8
  num_virtual_gpus_per_node: 72 # 8 GPUs per Node * 3 Oversubscription Factor * 3 Replicas.
  gpu_allocation_granularity: 1
  device_plugin:
    path: /var/lib/kubelet/device-plugins/
    # port: 8079
  network:
    port: 8080
    local_service_name: local-daemon-network
    global_service_name: daemon-network
    service_port: 8075
    jupyter:
      kernel_registry_port: 8075
      hb_port: 9000
      control_port: 9001
      shell_port: 9002
      stdin_port: 9003
      iopub_port1: 9004
      iopub_port2: 9005
      starting_resource_port: 9006

smr:
  port: 8080

common:
  config_file_dir: "/kernel-configmap"
  ipython_config_path: "/home/jovyan/.ipython/profile_default/ipython_config.json"
  node_local_pvc_mount_point: "node_local"
  use_stateful_set: false # If true, use StatefulSets for the distributed kernel replica pods. If false, use CloneSets.
  debug: true
  scheduling_policy: "static" # Options are "default", "static", and "dynamic" for now.

ingress:
  enabled: false
  className: ""
  annotations: {}
  hosts:
    - host: chart-example.local
      paths:
        - path: /
          pathType: ImplementationSpecific
  tls: []

resources: {}

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 100
  targetCPUUtilizationPercentage: 80

nodeSelector: {}

tolerations: []

affinity: {}
# Configuration for classes of static volumes.
# classes:
#   - name: local-storage # Defines name of storage classes.
#     # Path on the host where local volumes of this storage class are mounted
#     # under.
#     hostDir: /data
#     # Optionally specify mount path of local volumes. By default, we use same
#     # path as hostDir in container.
#     # mountDir: /mnt/local-storage
#     # The volume mode of created PersistentVolume object. Default to Filesystem
#     # if not specified.
#     volumeMode: Filesystem
#     # Filesystem type to mount.
#     # It applies only when the source path is a block device,
#     # and desire volume mode is Filesystem.
#     # Must be a filesystem type supported by the host operating system.
#     fsType: ext4
#     # File name pattern to discover. By default, discover all file names.
#     namePattern: "*"
#     # Restrict topology of provisioned volumes to specific labels
#     allowedTopologies:
#     blockCleanerCommand:
#       #  Run shred utility for 2 iterations.
#       - "/scripts/shred.sh"
#       - "2"
